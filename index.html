<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>æ¥­å‹™ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
  * { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --font-small: 11px;
    --font-medium: 13px;
    --font-large: 15px;
  }

  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: #f5f5f5;
    color: #111;
    line-height: 1.6;
    font-size: var(--font-small);  /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šå° */
  }

  /* â˜… æœ¬æ–‡ã ã‘ã‚µã‚¤ã‚ºå¯å¤‰ã«ã™ã‚‹ */
  main {
    font-size: var(--font-small);  /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šå° */
  }
  body.font-medium main {
    font-size: var(--font-medium);
  }
  body.font-large main {
    font-size: var(--font-large);
  }

  /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ï¼ˆãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ï¼‰ã®æ–‡å­—ã‚µã‚¤ã‚ºã‚‚é€£å‹•ã•ã›ã‚‹ */
  body.font-medium .app-menu-sheet {
    font-size: var(--font-medium);
  }
  body.font-large .app-menu-sheet {
    font-size: var(--font-large);
  }

  .app {
    max-width: 1400px;
    margin: 0 auto;
    padding-bottom: 80px;
  }

  /* ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== */
  .top-bar {
    position: sticky;
    top: 0;
    z-index: 4000;
    background: #111;
    color: #fff;
    padding: 10px 14px 8px;
  }

  .app-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 4px;
  }

  .top-bar h1 {
    font-size: 1.45em;
    font-weight: 600;
  }

  .top-bar p {
    font-size: 1em;
    opacity: 0.85;
    margin-top: 2px;
  }

  /* DMMé¢¨ 9ãƒ‰ãƒƒãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
  .app-menu-btn {
    border: none;
    background: transparent;
    padding: 4px;
    border-radius: 999px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  .app-menu-btn:hover {
    background: rgba(255,255,255,0.08);
  }
  .dots-grid {
    display: grid;
    grid-template-columns: repeat(3, 4px);
    grid-auto-rows: 4px;
    gap: 3px;
  }
  .dots-grid span {
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: #fff;
  }

  /* ãƒŠãƒ“ï¼ˆæ™‚é–“å¸¯ã‚¸ãƒ£ãƒ³ãƒ—ï¼‰ */
  .nav {
    display: none;
    overflow-x: auto;
    gap: 6px;
    padding: 8px 2px 4px;
    margin-top: 8px;
    scrollbar-width: none;
  }
  .nav::-webkit-scrollbar { display: none; }
  .nav a {
    flex: 0 0 auto;
    padding: 4px 8px;
    font-size: 1em;
    border-radius: 999px;
    border: 1px solid #555;
    color: #eee;
    text-decoration: none;
    white-space: nowrap;
  }
  .nav a:hover {
    background: #fff;
    color: #111;
  }

  /* æ–‡å­—ã‚µã‚¤ã‚ºåˆ‡ã‚Šæ›¿ãˆãƒãƒ¼ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼å†…ï¼‰ */
  .font-size-selector {
    display: none;
    gap: 6px;
    padding: 6px 0 2px;
  }
  .font-size-selector button,
  .btn-secondary {
    padding: 3px 10px;
    font-size: 0.95em;
    background: #222;
    border: 1px solid #555;
    border-radius: 999px;
    color: #eee;
    cursor: pointer;
  }
  .font-size-selector button:hover,
  .btn-secondary:hover {
    background: #444;
  }
  .font-size-selector button.active,
  .btn-secondary.active {
    background: #fff;
    color: #111;
    border-color: #fff;
  }

  .btn-row {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 4px;
  }

  main { padding: 10px 12px 20px; }

  .slot {
    margin-bottom: 12px;
    background: #fff;
    border-radius: 10px;
    padding: 10px 10px 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.06);
  }

  .slot-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 4px;
    border-bottom: 1px solid #eee;
    padding-bottom: 4px;
  }
  .slot-title {
    font-size: 1.27em;
    font-weight: 600;
  }
  .slot-note {
    font-size: 0.9em;
    color: #666;
  }

  .tasks-group {
    margin-top: 6px;
  }
  .tasks-group h3 {
    font-size: 1.1em;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    margin-bottom: 4px;
  }
  .badge {
    font-size: 0.9em;
    padding: 1px 6px;
    border-radius: 999px;
  }
  .badge-a { background: #111; color: #fff; }
  .badge-b { background: #e0e0e0; color: #333; }

  ul.tasks {
    list-style: none;
    padding-left: 10px;
    border-left: 2px solid #111;
    margin-bottom: 4px;
  }
  ul.tasks.b { border-left-color: #bbb; }

  .task-item {
    display: flex;
    align-items: flex-start;
    gap: 6px;
    font-size: 1em;
    padding: 2px 0;
  }
  .task-item input[type="checkbox"] {
    margin-top: 2px;
  }
  .task-text { flex: 1; }

  .footer-note {
    font-size: 0.9em;
    color: #666;
    padding: 6px 4px 20px;
    text-align: center;
  }

  /* ===== ãŠçŸ¥ã‚‰ã›ãƒ»å¼•ãç¶™ãç”¨ ===== */
  .info-list {
    list-style: none;
    font-size: 1em;
    padding-left: 4px;
  }
  .info-list li {
    padding: 2px 0;
  }

  .handover {
    margin-top: 4px;
  }
  .handover-title {
    font-size: 1.18em;
    font-weight: 600;
    margin-bottom: 4px;
  }
  .handover-note {
    font-size: 0.9em;
    color: #666;
    margin-bottom: 4px;
  }

  .handover-log {
    list-style: none;
    font-size: 1em;
    border-top: 1px dashed #ddd;
    padding-top: 4px;
  }
  .handover-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 2px 0;
  }
  .handover-text {
    flex: 1;
    margin-right: 6px;
  }
  .handover-time {
    font-size: 0.9em;
    color: #666;
    margin-right: 4px;
    white-space: nowrap;
  }
  .handover-remove {
    border: none;
    background: transparent;
    font-size: 1.1em;
    cursor: pointer;
    color: #999;
  }
  .handover-remove:hover { color: #f33; }

  .handover-clear {
    margin-top: 4px;
    text-align: right;
  }
  .handover-clear button {
    border: none;
    background: #eee;
    border-radius: 999px;
    padding: 2px 8px;
    font-size: 0.9em;
    cursor: pointer;
  }

  /* ç«¯æœ«ãƒ©ãƒ™ãƒ« */
  .device-label-bar {
    margin-top: 8px;
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
    font-size: 12px;
  }
  .device-label-title { font-weight: 600; }
  .device-label-display {
    padding: 2px 8px;
    border-radius: 999px;
    background: #222;
    color: #fff;
    font-size: 11px;
  }
  .device-label-input {
    flex: 1;
    min-width: 140px;
    max-width: 220px;
    padding: 4px 8px;
    border-radius: 999px;
    border: 1px solid #ccc;
    font-size: 12px;
  }
  .device-label-save-btn {
    padding: 4px 10px;
    border-radius: 999px;
    border: none;
    font-size: 12px;
    background: #1f7aec;
    color: #fff;
    cursor: pointer;
  }
  .device-label-save-btn:hover { opacity: 0.9; }

  /* ã‚·ãƒ•ãƒˆè¡¨ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼å†…ï¼‰ */
  .shift-shortcut {
    margin-top: 8px;
    display: none;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
    font-size: 11px;
  }
  .shift-btn {
    background: #fff;
    color: #111;
    border-radius: 999px;
    border: 1px solid #ddd;
    padding: 4px 10px;
    font-size: 12px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.08);
  }
  .shift-btn:hover { background: #f5f5f5; }
  .shift-btn:disabled { opacity: 0.5; cursor: default; }
  .shift-note { color: #ccc; font-size: 10px; }

  /* ä»Šã®æ™‚é–“å¸¯ã‚¸ãƒ£ãƒ³ãƒ—ãƒãƒŠãƒ¼ */
  .jump-banner {
    margin-top: 14px;
    padding: 10px 14px;
    border-radius: 999px;
    background: #fff7e5;
    border: 1px solid #ffd48a;
    display: flex;
    align-items: center;
    gap: 12px;
    justify-content: flex-end;
  }
  .jump-banner-note {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: #c25a00;
    flex: 1;
  }
  .jump-banner-icon { font-size: 18px; line-height: 1; }
  .jump-btn {
    background: #111;
    color: #fff;
    padding: 8px 16px;
    border-radius: 999px;
    border: none;
    cursor: pointer;
    font-size: 13px;
    display: flex;
    flex-direction: column;
    align-items: center;
    line-height: 1.2;
    box-shadow: 0 2px 4px rgba(0,0,0,0.16);
    transition: transform 0.08s ease, box-shadow 0.08s ease;
  }
  .jump-btn-main { font-weight: 600; }
  .jump-btn-sub {
    font-size: 10px;
    opacity: 0.9;
  }
  .jump-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 3px 6px rgba(0,0,0,0.22);
  }
  .jump-btn:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0,0,0,0.18);
  }

  @media (max-width: 640px) {
    .jump-banner {
      flex-direction: column;
      align-items: flex-start;
      border-radius: 16px;
    }
    .jump-btn {
      width: 100%;
      align-items: center;
    }
    .sp-only { display: inline; }
  }
  .sp-only { display: none; }

  /* å¼•ãç¶™ããƒ¡ãƒ¢ï¼šãƒãƒƒãƒ—ï¼‹ã‚‚ã£ã¨è¡¨ç¤º */
  .handover-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    align-items: center;
  }
  .handover-chips-primary,
  .handover-chips-extra {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
  }
  .handover-chips-extra {
    width: 100%;
    margin-top: 4px;
  }
  .handover-chips-extra.is-hidden { display: none; }

  .handover-chip {
    border: 1px solid #ccc;
    border-radius: 999px;
    padding: 3px 8px;
    font-size: 0.9em;
    background: #fafafa;
    cursor: pointer;
  }
  .handover-chip:hover { background: #eee; }

  .handover-chips-toggle {
    margin-left: auto;
    margin-top: 0;
    padding: 6px 14px;
    font-size: 12px;
    color: #a05a00;
    background: #fff7e5;
    border: 1px solid #ffc27a;
    border-radius: 20px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    transition: all 0.2s ease;
  }
  .handover-chips-toggle:hover {
    background: #ffe9c6;
    box-shadow: 0 3px 6px rgba(0,0,0,0.12);
  }
  .handover-chips-toggle span.arrow {
    display: inline-block;
    transition: transform 0.25s ease;
  }
  .handover-chips-toggle.open {
    background: #ffe0b2;
    border-color: #ffb74d;
    color: #8d4b00;
  }
  .handover-chips-toggle.open span.arrow {
    transform: rotate(180deg);
  }

  /* ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
  .app-menu-header {
    display: flex;
    align-items: center;
    justify-content: space_between;
    margin-bottom: 6px;
  }
  .app-menu-title {
    font-size: 1em;
    font-weight: 600;
  }
  .app-menu-close {
    border: none;
    background: transparent;
    font-size: 1.1em;
    padding: 2px 4px;
    cursor: pointer;
  }
  .app-menu-section {
    margin-top: 10px;
  }
  .app-menu-section h3 {
    font-size: 0.95em;
    margin-bottom: 4px;
  }
  #scrollSpeedSelect {
    margin-top: 2px;
    padding: 4px 8px;
    border-radius: 999px;
    border: 1px solid #ccc;
    font-size: 0.9em;
  }

  /* ==== DMMé¢¨ï¼šè¡Œãƒ¡ãƒ‹ãƒ¥ãƒ¼ ==== */
  .app-menu-body {
    margin-top: 4px;
  }

  .app-menu-list {
    list-style: none;
    margin: 0;
    padding: 0;
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid #eee;
    background: #fff;
  }

  .app-menu-item {
    display: flex;
    align-items: center;
    padding: 10px 12px;
    border-bottom: 1px solid #f1f1f1;
  }

  .app-menu-item:last-child {
    border-bottom: none;
  }

  .app-menu-icon {
    width: 28px;
    font-size: 1.1em;
    text-align: center;
    margin-right: 10px;
  }

  .app-menu-main {
    flex: 1;
  }

  .app-menu-sub {
    font-size: 0.85em;
    color: #777;
  }

  .app-menu-right {
    margin-left: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .menu-link-btn {
    border: none;
    border-radius: 999px;
    padding: 4px 10px;
    font-size: 0.9em;
    background: #f5f5f5;
    cursor: pointer;
  }
  .menu-link-btn:hover {
    background: #eee;
  }

  .menu-arrow {
    font-size: 1.1em;
    color: #bbb;
  }

  .app-menu-font-buttons .btn-secondary {
    padding: 4px 8px;
    font-size: 0.9em;
  }

  /* === ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³åŒ– === */
  .app-menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    justify-content: flex-end;
    z-index: 7000;
  }

  .app-menu-overlay.open {
    display: flex;
  }

  .app-menu-sheet {
    width: 100%;
    height: 100vh;
    background: #fff;
    border-radius: 0;
    padding: 16px;
    display: flex;
    flex-direction: column;
    animation: slideUp 0.25s ease-out;
  }

  .app-menu-body {
    flex: 1;
    overflow-y: auto;
    padding-bottom: 40px;
  }

  @keyframes slideUp {
    from { transform: translateY(20%); opacity: 0; }
    to   { transform: translateY(0); opacity: 1; }
  }

  /* ===== â‘  ãŠçŸ¥ã‚‰ã›æ—¢èª­ãƒãƒƒã‚¸ ï¼‹ ãƒœã‚¿ãƒ³ ===== */
  .notice-status-badge {
    display: inline-block;
    margin-left: 6px;
    padding: 1px 8px;
    border-radius: 999px;
    font-size: 10px;
    vertical-align: middle;
  }
  .notice-status-badge.unread {
    background: #f44336;
    color: #fff;
  }
  .notice-status-badge.read {
    background: #4caf50;
    color: #fff;
  }

  .notice-read-btn {
    margin-top: 6px;
    padding: 4px 10px;
    font-size: 11px;
    border-radius: 999px;
    border: 1px solid #ccc;
    background: #fafafa;
    cursor: pointer;
  }
  .notice-read-btn:hover {
    background: #f0f0f0;
  }

  /* ===== â‘¡ å„æ™‚é–“å¸¯ã®å®Œäº†ç‡ãƒãƒ¼ï¼ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸€ç•ªä¸‹ã«è¡¨ç¤ºï¼‰ ===== */
  .slot-progress {
    margin-top: 8px;
    padding-top: 4px;
    border-top: 1px solid #eee;  /* ãƒ¼ãƒ¼ãƒ¼ãƒ¼ãƒ¼ ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ */
    width: 100%;
  }
  .slot-progress-label {
    font-size: 0.9em;
    color: #666;
    margin-bottom: 2px;
  }
  .slot-progress-bar {
    width: 100%;
    height: 6px;
    border-radius: 999px;
    background: #eee;
    overflow: hidden;
  }
  .slot-progress-bar-inner {
    height: 100%;
    width: 0%;
    border-radius: 999px;
    background: #1f7aec; /* é’ã„ãƒãƒ¼ */
    transition: width 0.15s ease-out;
  }
  </style>
</head>
<body>
  <div class="app">
    <!-- ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== -->
    <header class="top-bar">
      <div class="app-header">
        <button type="button" class="app-menu-btn" id="appMenuBtn" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼">
          <div class="dots-grid">
            <span></span><span></span><span></span>
            <span></span><span></span><span></span>
            <span></span><span></span><span></span>
          </div>
        </button>
        <h1>æ¥­å‹™ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ</h1>
      </div>
      <p>æ™‚é–“å¸¯ã”ã¨ã® Aï¼å¿…é ˆ / Bï¼ä½™è£•ã‚ã‚Œã°ã€‚è¿·ã£ãŸã‚‰Aã‹ã‚‰ã€‚</p>

      <!-- ç«¯æœ«ãƒ©ãƒ™ãƒ« -->
      <div class="device-label-bar">
        <span class="device-label-title">åå‰ã‚’å…¥åŠ›ï¼š</span>
        <span id="deviceLabelDisplay" class="device-label-display">æœªè¨­å®š</span>
        <input
          id="deviceLabelInput"
          class="device-label-input"
          type="text"
          placeholder="ä¾‹ï¼šãŸãªã‹"
        />
        <button id="deviceLabelSaveBtn" class="device-label-save-btn">
          ä¿å­˜
        </button>
      </div>

      <!-- ã‚·ãƒ•ãƒˆè¡¨ãƒ¯ãƒ³ã‚¿ãƒƒãƒ— -->
      <div class="shift-shortcut">
        <button type="button" id="openShiftBtn" class="shift-btn">
          <span>ğŸ“… ã‚·ãƒ•ãƒˆè¡¨</span>
        </button>
        <span class="shift-note">
          â€»ã€Œä»Šé€±ã®ã‚·ãƒ•ãƒˆè¡¨ç”»åƒã€ã‚’åˆ¥ã‚¿ãƒ–ã§é–‹ãã¾ã™ã€‚
        </span>
      </div>

      <!-- æ™‚é–“å¸¯ãƒŠãƒ“ -->
      <nav class="nav">
        <a href="#t6-8">6ã€œ8æ™‚</a>
        <a href="#t9-11">9ã€œ11æ™‚</a>
        <a href="#t12-14">12ã€œ14æ™‚</a>
        <a href="#t15-17">15ã€œ17æ™‚</a>
        <a href="#t18-20">18ã€œ20æ™‚</a>
        <a href="#t21-23">21ã€œ23æ™‚</a>
        <a href="#t0-2">0ã€œ2æ™‚</a>
        <a href="#t3-5">3ã€œ5æ™‚</a>
      </nav>

      <!-- æ–‡å­—ã‚µã‚¤ã‚ºï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼ç”¨ï¼‰ -->
      <div class="font-size-selector">
        <button data-size="small">å°</button>
        <button data-size="medium">ä¸­</button>
        <button data-size="large">å¤§</button>
      </div>
    </header>

    <main>
      <!-- ç¾åœ¨æ™‚åˆ»è¡¨ç¤º -->
      <div id="time-display" style="padding: 10px; color: #333;">
        æ™‚åˆ»ã‚’èª­ã¿è¾¼ã¿ä¸­â€¦
      </div>

      <!-- ä»Šã®æ™‚é–“å¸¯ã¸ã‚¸ãƒ£ãƒ³ãƒ— -->
      <div class="jump-banner">
        <div class="jump-banner-note">
          <span class="jump-banner-icon">â°</span>
          <span class="jump-banner-text">
            â€»ãŠçŸ¥ã‚‰ã›ã‚’èª­ã‚“ã ã‚‰ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦<br class="sp-only">
            ã€Œä»Šã‚„ã‚‹æ™‚é–“å¸¯ã€ã®æ¬„ã¾ã§ç§»å‹•ã—ã¦ãã ã•ã„ã€‚
          </span>
        </div>
        <button id="jumpNowSlotBtn" class="jump-btn">
          <span class="jump-btn-main">ä»Šã®æ™‚é–“å¸¯ã¸</span>
          <span class="jump-btn-sub">ã‚¿ã‚¹ã‚¯æ¬„ã¾ã§ã‚¸ãƒ£ãƒ³ãƒ—</span>
        </button>
      </div>

      <!-- ãŠçŸ¥ã‚‰ã›ï¼ˆâ‘  æ—¢èª­ãƒãƒƒã‚¸ï¼‹ãƒœã‚¿ãƒ³å¯¾å¿œç‰ˆï¼‰ -->
      <section class="slot" id="notice-section">
        <div class="slot-header">
          <div class="slot-title">ãŠçŸ¥ã‚‰ã›</div>
          <div class="slot-note">
            çµŒå–¶è€…ã‹ã‚‰ã®å…±æœ‰äº‹é …
            <span id="notice-status-badge" class="notice-status-badge"></span>
          </div>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-a">ãŠçŸ¥ã‚‰ã›</span></h3>
          <ul class="info-list" id="notice-list">
            <li>ãŠçŸ¥ã‚‰ã›ã‚’èª­ã¿è¾¼ã¿ä¸­...</li>
          </ul>

          <button id="notice-read-btn" class="notice-read-btn">
            ã™ã¹ã¦èª­ã‚“ã ã“ã¨ã«ã™ã‚‹
          </button>
        </div>
      </section>

      <!-- â˜… å…±é€š å¼•ãç¶™ããƒ¡ãƒ¢ï¼ˆå…¨æ™‚é–“å¸¯å…±é€šï¼‰ -->
      <section class="slot handover-slot" data-slot="global">
        <div class="slot-header">
          <div class="slot-title">å¼•ãç¶™ããƒ¡ãƒ¢ï¼ˆå…¨å“¡ã§å…±æœ‰ãƒ»å…¨æ™‚é–“å¸¯å…±é€šï¼‰</div>
          <div class="slot-note">æ™‚é–“å¸¯ã‚’ã¾ãŸãæ™‚ã®å…±æœ‰ãƒ¡ãƒ¢</div>
        </div>
        <div class="handover">
          <p class="handover-note">
            æ–‡ç« ã‚’æ›¸ãã®ãŒã ã‚‹ã„äººå‘ã‘ã€‚ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨ãƒ¡ãƒ¢ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚<br>
            â€»å³å´ã«ã€Œæ™‚é–“ / åå‰ã€ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
          </p>
          <div class="handover-chips"></div>
          <ul class="handover-log"></ul>
          <div class="handover-clear">
            <button type="button" class="handover-clear-btn">ãƒ¡ãƒ¢ã‚’å…¨éƒ¨æ¶ˆã™</button>
          </div>
        </div>
      </section>

      <!-- ===== ä»¥ä¸‹ã€æ™‚é–“å¸¯ã”ã¨ã®ã‚¿ã‚¹ã‚¯ ===== -->

      <!-- 6ã€œ8æ™‚ -->
      <section id="t6-8" class="slot">
        <div class="slot-header">
          <div class="slot-title">6:00ã€œ8:00</div>
          <div class="slot-note">æœã®ç«‹ã¡ä¸Šã’</div>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-a">A å¿…é ˆ</span> ã“ã®æ™‚é–“ã«å¿…ãšã‚„ã‚‹ã“ã¨</h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">CDCç´å“ãƒ»ç‰‡ã¥ã‘ï¼ˆ2ä¾¿ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ™ãƒ¼ã‚«ãƒªãƒ¼ç´å“ãƒ»ç‰‡ã¥ã‘ï¼ˆ2ä¾¿ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ã‚³ãƒ¼ãƒ’ãƒ¼ãƒã‚·ãƒ³æ¸…æƒï¼ˆæœ¬ä½“ãƒ»ã‚³ãƒ³ãƒ‡ã‚£ãƒ¡ãƒ³ãƒˆä»€å™¨ãƒ»å‘¨è¾ºï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒˆã‚¤ãƒ¬ç‚¹æ¤œ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒãƒƒãƒˆã®ãŠæ¹¯ç¢ºèª</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—å†…ãƒ»åº—é ­ã‚´ãƒŸè¢‹ã®ç‚¹æ¤œãƒ»äº¤æ›</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æ¸©åº¦ãƒã‚§ãƒƒã‚¯</span></label></li>
          </ul>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-b">B ä½™è£•</span> æ™‚é–“ãŒä½™ã£ãŸã¨ãã«ã§ããŸã‚‰åŠ©ã‹ã‚‹ã“ã¨</h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—å†…ãƒ»åº—é ­ã‚´ãƒŸç®±ã®æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ¼ãƒŠãƒ¼ï¼ˆLoppiãƒ»ATMãƒ»ã‚³ãƒ”ãƒ¼æ©Ÿï¼‰ãƒ»ã‚¤ãƒ¼ãƒˆã‚¤ãƒ³æ¸…æƒ</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 9ã€œ11æ™‚ -->
      <section id="t9-11" class="slot">
        <div class="slot-header">
          <div class="slot-title">9:00ã€œ11:00</div>
          <div class="slot-note">åˆå‰å¸¯</div>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-a">A å¿…é ˆ</span> ã“ã®æ™‚é–“ã«å¿…ãšã‚„ã‚‹ã“ã¨</h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒˆã‚¤ãƒ¬ç‚¹æ¤œ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">12æ™‚ç· ã‚ç™ºæ³¨</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åºŠæ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ—ãƒ©ã‚¤ã‚¹ã‚«ãƒ¼ãƒ‰å–ã‚Šä»˜ã‘</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒãƒƒãƒˆã®ãŠæ¹¯ç¢ºèª</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ¬ã‚¸ç‚¹æ¤œï¼ˆç¾é‡‘ãƒ»é‡‘åˆ¸ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ã‚³ãƒ¼ãƒ’ãƒ¼ãƒã‚·ãƒ³æ¸…æƒï¼ˆæœ¬ä½“ãƒ»ã‚³ãƒ³ãƒ‡ã‚£ãƒ¡ãƒ³ãƒˆãƒ»å‘¨è¾ºï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—èˆ—å‘¨è¾ºã®æ¸…æƒ</span></label></li>
          </ul>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-b">B ä½™è£•</span> æ™‚é–“ãŒä½™ã£ãŸã¨ãã«ã§ããŸã‚‰åŠ©ã‹ã‚‹ã“ã¨</h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—å†…ãƒ»åº—é ­ã‚´ãƒŸè¢‹ã®ç‚¹æ¤œãƒ»äº¤æ›</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æ¶ˆè€—å“ç™ºæ³¨ï¼ˆå¿…è¦ã‚ã‚Œã°ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FFãƒ»å¨æˆ¿åŸæ–™ ä½¿ç”¨æœŸé™ãƒã‚§ãƒƒã‚¯</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ç°çš¿æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å‰é™³ï¼ˆã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ãƒ»å†·è”µé…’ãƒ»è“å­ãƒ»å³å¸­éººï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åºŠæ¸…æƒï¼ˆ2å›ç›®ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å“å‡ºã—ï¼ˆã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ãƒ»å†·è”µé…’ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">è£œå……ï¼ˆãŸã°ã“ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FFè²©å£²è¨±å®¹ç¢ºèªãƒ»å»ƒæ£„</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ›ãƒƒãƒˆ/å¸¸æ¸©FFä½œæˆï¼ˆæ˜¼ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒãƒã‚«ãƒ•ã‚§è²©å£²æº–å‚™ï¼ˆã‚¢ã‚¤ã‚¹ã‚«ãƒƒãƒ—è£œå……ãªã©ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒˆã‚¤ãƒ¬æ¸…æƒï¼ˆ1æ—¥1å›ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">éš™ã‚ã‚‰ã°å‰é™³ï¼ˆç±³é£¯ãƒ»ã‚ªãƒ¼ãƒ—ãƒ³ã‚±ãƒ¼ã‚¹ãƒ»ãƒ‡ã‚¶ãƒ¼ãƒˆãƒ»ãƒ™ãƒ¼ã‚«ãƒªãƒ¼ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æœˆæ›œã®ã¿ï¼šæ–°å•†å“è²©ä¿ƒç‰©è¨­ç½®</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 12ã€œ14æ™‚ -->
      <section id="t12-14" class="slot">
        <div class="slot-header">
          <div class="slot-title">12:00ã€œ14:00</div>
          <div class="slot-note">æ˜¼å¸¯</div>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-a">A å¿…é ˆ</span> ã“ã®æ™‚é–“ã«å¿…ãšã‚„ã‚‹ã“ã¨</h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">CDCç´å“ãƒ»ç‰‡ã¥ã‘ï¼ˆ3ä¾¿ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å‰é™³ï¼ˆã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ãƒ»å†·è”µé…’ã€è“å­ãƒ»å³å¸­éººï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒãƒƒãƒˆã®ãŠæ¹¯ç¢ºèª</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">14æ™‚ã‚ªãƒ¼ãƒ—ãƒ³ã‚±ãƒ¼ã‚¹å»ƒæ£„ï¼ˆç±³é£¯ãƒ»èª¿ç†ãƒ‘ãƒ³ãƒ»ãƒ™ãƒ¼ã‚«ãƒªãƒ¼ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å»ƒæ£„ç™»éŒ²</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ã‚³ãƒ¼ãƒ’ãƒ¼ãƒã‚·ãƒ³æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒˆã‚¤ãƒ¬æ¸…æƒï¼ˆ1æ—¥1å›ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ä¼ç¥¨æ•´ç†</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">é€é‡‘</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ç°çš¿æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">è£œå……ï¼ˆãƒ›ãƒƒãƒˆãƒ‰ãƒªãƒ³ã‚¯ï¼‰</span></label></li>
          </ul>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-b">B ä½™è£•</span> æ™‚é–“ãŒä½™ã£ãŸã¨ãã«ã§ããŸã‚‰åŠ©ã‹ã‚‹ã“ã¨</h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">éš™ã‚ã‚‰ã°å‰é™³ï¼ˆç±³é£¯ãƒ»ã‚ªãƒ¼ãƒ—ãƒ³ã‚±ãƒ¼ã‚¹ãƒ»ãƒ‡ã‚¶ãƒ¼ãƒˆãƒ»ãƒ™ãƒ¼ã‚«ãƒªãƒ¼ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å“å‡ºã—ï¼ˆè“å­ãƒ»å³å¸­éººãƒ»ãƒ‰ãƒªãƒ³ã‚¯å‰¤ãƒ»ã‚¢ã‚¤ã‚¹ãƒ»å†·å‡é£Ÿå“ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—å†…ãƒ»åº—é ­ã‚´ãƒŸç®±ã®æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åºŠæ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ€ã‚¹ã‚¿ãƒ¼ã‚¯ãƒ­ã‚¹ãŒã‘</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 15ã€œ17æ™‚ -->
      <section id="t15-17" class="slot">
        <div class="slot-header">
          <div class="slot-title">15:00ã€œ17:00</div>
          <div class="slot-note">å¤•æ–¹å‰</div>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-a">A å¿…é ˆ</span> ã“ã®æ™‚é–“ã«å¿…ãšã‚„ã‚‹ã“ã¨</h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">éš™ã‚ã‚‰ã°å‰é™³ï¼ˆç±³é£¯ãƒ»ã‚ªãƒ¼ãƒ—ãƒ³ã‚±ãƒ¼ã‚¹ãƒ»ãƒ‡ã‚¶ãƒ¼ãƒˆãƒ»ãƒ™ãƒ¼ã‚«ãƒªãƒ¼ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å‰é™³ï¼ˆã‚¢ã‚¤ã‚¹ãƒ»å†·å‡é£Ÿå“ã€ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ãƒ»å†·è”µé…’ã€è“å­ãƒ»å³å¸­éººï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">è£œå……ï¼ˆãŸã°ã“ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FFè²©å£²è¨±å®¹ç¢ºèªãƒ»å»ƒæ£„</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ›ãƒƒãƒˆãƒ»å¸¸æ¸©FFä½œæˆï¼ˆå¤•ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒˆã‚¤ãƒ¬ç‚¹æ¤œ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—èˆ—å‘¨è¾ºã®æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æ¸©åº¦ãƒã‚§ãƒƒã‚¯</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãŸã°ã“ç´å“ãƒ»ç‰‡ã¥ã‘</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ä¸­è¯ã¾ã‚“ä½œæˆï¼ˆæ˜¼ï¼‰</span></label></li>
          </ul>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-b">B ä½™è£•</span> æ™‚é–“ãŒä½™ã£ãŸã¨ãã«ã§ããŸã‚‰åŠ©ã‹ã‚‹ã“ã¨</h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ¬ã‚¸ç‚¹æ¤œ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ€ã‚¹ã‚¿ãƒ¼ã‚¯ãƒ­ã‚¹ãŒã‘</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å…¥å£ãƒ‰ã‚¢æ‹­ãä¸Šã’</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æœˆæ›œã®ã¿ï¼šè²©ä¿ƒç‰©è¨­ç½®</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 18ã€œ20æ™‚ -->
      <section id="t18-20" class="slot">
        <div class="slot-header">
          <div class="slot-title">18:00ã€œ20:00</div>
          <div class="slot-note">å¤•æ–¹ã€œå¤œ</div>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-a">A å¿…é ˆ</span> ã“ã®æ™‚é–“ã«å¿…ãšã‚„ã‚‹ã“ã¨</h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—å†…ãƒ»åº—é ­ã‚´ãƒŸè¢‹ã®ç‚¹æ¤œãƒ»äº¤æ›</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒˆã‚¤ãƒ¬æ¸…æƒï¼ˆ1æ—¥1å›ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å‰é™³ï¼ˆè“å­ãƒ»å³å¸­éººã€ã‚½ãƒ•ãƒˆãƒ‰ãƒªãƒ³ã‚¯ãƒ»å†·è”µé…’ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒˆã‚¤ãƒ¬ç‚¹æ¤œ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—èˆ—å‘¨è¾ºã®æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ã‚³ãƒ¼ãƒ’ãƒ¼ãƒã‚·ãƒ³æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æ²¹ã®é…¸ä¾¡åº¦ãƒã‚§ãƒƒã‚¯</span></label></li>
          </ul>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-b">B ä½™è£•</span> æ™‚é–“ãŒä½™ã£ãŸã¨ãã«ã§ããŸã‚‰åŠ©ã‹ã‚‹ã“ã¨</h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">é›‘èªŒãƒ»æ›¸ç±ãƒ¡ãƒ³ãƒ†</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å¤•åˆŠè¿”å“</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ›ãƒƒãƒˆãƒ»å¸¸æ¸©FFä½œæˆï¼ˆå¤œï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">è£½æ°·æ©Ÿæ¸…æƒï¼ˆæ°´ãƒ»åœŸï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æ£šæ¸…æƒï¼ˆæ—¥ç”¨å“1å°ï¼‰ï¼ˆæ°´ãƒ»åœŸï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åºŠæ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ€ã‚¹ã‚¿ãƒ¼ã‚¯ãƒ­ã‚¹ãŒã‘</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">è¿”æœ¬</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—é ­ï¼ˆè»’ä¸‹ãƒ»ã‚¬ãƒ©ã‚¹é¢ï¼‰æ¸…æƒï¼ˆæ°´ãƒ»åœŸï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—å†…ãƒ»åº—é ­ã‚´ãƒŸç®±æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">20æ™‚ã‚ªãƒ¼ãƒ—ãƒ³ã‚±ãƒ¼ã‚¹å»ƒæ£„ï¼ˆé•·é®®åº¦ãŠã«ãã‚Šãƒ»é•·é®®æ‰‹å·»ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—å¤–/åº—å†…ãƒãƒƒãƒˆæ¸…æƒï¼ˆæ°´ãƒ»åœŸï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å†·å‡æ©Ÿå™¨æ¸…æƒï¼ˆæ°´ï¼‰</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 21ã€œ23æ™‚ -->
      <section id="t21-23" class="slot">
        <div class="slot-header">
          <div class="slot-title">21:00ã€œ23:00</div>
          <div class="slot-note">å¤œå¸¯</div>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-a">A å¿…é ˆ</span> ã“ã®æ™‚é–“ã«å¿…ãšã‚„ã‚‹ã“ã¨</h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">è£œå……ï¼ˆãŸã°ã“ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">DDCç´å“ãƒ»ç‰‡ã¥ã‘ï¼ˆâ€»æ°´ãƒ»åœŸã¯DDCç„¡ã— â†’ æƒé™¤ã®æ—¥ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">22æ™‚ã‚ªãƒ¼ãƒ—ãƒ³ã‚±ãƒ¼ã‚¹å»ƒæ£„ï¼ˆç±³é£¯ãƒ»èª¿ç†ãƒ‘ãƒ³ãƒ»ãƒãƒ«ãƒ‰å¼å½“ãƒ»èª¿ç†éººâ€¦ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒãƒã‚«ãƒ•ã‚§è²©å£²æº–å‚™ï¼ˆã‚¢ã‚¤ã‚¹ã‚«ãƒƒãƒ—ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒˆã‚¤ãƒ¬ç‚¹æ¤œ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ç°çš¿æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æ¸©åº¦ãƒã‚§ãƒƒã‚¯</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒˆã‚¤ãƒ¬ç‚¹æ¤œï¼ˆå†ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">0æ™‚ã‚ªãƒ¼ãƒ—ãƒ³ã‚±ãƒ¼ã‚¹å»ƒæ£„ï¼ˆæ¬¡æ™‚é–“å¸¯ã¸ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ›ãƒƒãƒˆãƒ‰ãƒªãƒ³ã‚¯è²©å£²è¨±å®¹ç¢ºèªãƒ»å»ƒæ£„</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å»ƒæ£„ç™»éŒ²</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ã‚³ãƒ¼ãƒ’ãƒ¼ãƒã‚·ãƒ³æ¸…æƒï¼ˆæœ¬ä½“ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ï¼‰</span></label></li>
          </ul>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-b">B ä½™è£•</span> æ™‚é–“ãŒä½™ã£ãŸã¨ãã«ã§ããŸã‚‰åŠ©ã‹ã‚‹ã“ã¨</h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">åº—å†…è²©ä¿ƒç‰©è¨­ç½®ï¼ˆæ–°å•†å“ç´å“æ—¥ã§ãªã„æ—¥ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒˆã‚¤ãƒ¬æ¸…æƒï¼ˆ1æ—¥1å›ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å¹³å ´è²©å£²è¨±å®¹ç¢ºèªãƒ»å»ƒæ£„</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ»å¸è¾¼å£ãƒ»æ›æ°—æ‰‡æ¸…æƒï¼ˆæ°´ãƒ»åœŸï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ•ãƒ©ã‚¤ãƒ¤ãƒ¼æ¸…æƒãƒ»æ²¹äº¤æ›ï¼ˆæ°´ãƒ»åœŸï¼‰</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 0ã€œ2æ™‚ -->
      <section id="t0-2" class="slot">
        <div class="slot-header">
          <div class="slot-title">0:00ã€œ2:00</div>
          <div class="slot-note">æ·±å¤œå‰åŠ</div>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-a">A å¿…é ˆ</span> ã“ã®æ™‚é–“ã«å¿…ãšã‚„ã‚‹ã“ã¨</h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FDCç´å“ãƒ»ç‰‡ã¥ã‘</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æ¸©åº¦ãƒã‚§ãƒƒã‚¯</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æ¤œåå°æ—¥ä»˜å¤‰æ›´</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ç²¾ç®—</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ã‚³ãƒ”ãƒ¼æ©Ÿç²¾ç®—ãƒ»ç”¨ç´™è£œå……ï¼ˆå…¥é‡‘å«ã‚€ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">é›‘èªŒç´å“ãƒ»ç‰‡ã¥ã‘</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FFä»€å™¨æ¸…æƒï¼ˆä¸­è¯ã¾ã‚“ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FFè²©å£²è¨±å®¹ç¢ºèªãƒ»å»ƒæ£„</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ›ãƒƒãƒˆãƒ‰ãƒªãƒ³ã‚¯è²©å£²è¨±å®¹ç¢ºèªãƒ»å»ƒæ£„</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">1æ™‚ã‚ªãƒ¼ãƒ—ãƒ³ã‚±ãƒ¼ã‚¹å»ƒæ£„ï¼ˆç±³é£¯ãƒ»èª¿ç†ãƒ‘ãƒ³ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å¹³å ´è²©å£²è¨±å®¹ç¢ºèªãƒ»å»ƒæ£„</span></label></li>
          </ul>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-b">B ä½™è£•</span> æ™‚é–“ãŒä½™ã£ãŸã¨ãã«ã§ããŸã‚‰åŠ©ã‹ã‚‹ã“ã¨</h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æ¸…æƒ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æ·±å¤œæ™‚é–“å¸¯ã®ç´™å¹£ç¢ºèªãƒ»èª¿æ•´</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ¬ã‚¸ãƒ»ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼å‘¨è¾ºæ¸…æƒ</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 3ã€œ5æ™‚ -->
      <section id="t3-5" class="slot">
        <div class="slot-header">
          <div class="slot-title">3:00ã€œ5:00</div>
          <div class="slot-note">æ—©æœ</div>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-a">A å¿…é ˆ</span> ã“ã®æ™‚é–“ã«å¿…ãšã‚„ã‚‹ã“ã¨</h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æœåˆŠç´å“ãƒ»ç‰‡ã¥ã‘</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å“å‡ºã—ï¼ˆå…¨å•†å“ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">å“å‡ºã—ï¼ˆãƒãƒ«ãƒ‰é£²æ–™ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">æ£šæ»‘ã‚Šæƒé™¤ï¼ˆ1å°ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ãƒ›ãƒƒãƒˆãƒ»å¸¸æ¸©FFä½œæˆï¼ˆæœï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ä¸­è¯ã¾ã‚“ä½œæˆï¼ˆæœï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">CDCç´å“ãƒ»ç‰‡ã¥ã‘ï¼ˆ2ä¾¿ï¼‰</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">4æ™‚ã‚ªãƒ¼ãƒ—ãƒ³ã‚±ãƒ¼ã‚¹å»ƒæ£„ï¼ˆç±³é£¯ãƒ»é•·é®®æ‰‹å·»ãƒ»ãƒãƒ«ãƒ‰å¼å½“â€¦ï¼‰</span></label></li>
          </ul>
        </div>
        <div class="tasks-group">
          <h3><span class="badge badge-b">B ä½™è£•</span> æ™‚é–“ãŒä½™ã£ãŸã¨ãã«ã§ããŸã‚‰åŠ©ã‹ã‚‹ã“ã¨</h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ä½™è£•ãŒã‚ã‚Œã°ï¼šå‰é™³ãƒ»æ¸…æƒã‚’è¿½åŠ </span></label></li>
          </ul>
        </div>
      </section>

      <!-- ================== ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šãƒ¡ãƒ‹ãƒ¥ãƒ¼ ================== -->
      <div class="app-menu-overlay" id="appMenuOverlay">
        <div class="app-menu-sheet">
          <div class="app-menu-header">
            <div class="app-menu-title">è¡¨ç¤ºãƒ»ã‚·ãƒ•ãƒˆè¨­å®š</div>
            <button type="button" class="app-menu-close" id="appMenuClose">âœ•</button>
          </div>

          <div class="app-menu-body">
            <ul class="app-menu-list">
              <!-- ã‚·ãƒ•ãƒˆè¡¨ è¡Œ -->
              <li class="app-menu-item">
                <div class="app-menu-icon">ğŸ“…</div>
                <div class="app-menu-main">
                  <div class="app-menu-title">ã‚·ãƒ•ãƒˆè¡¨</div>
                  <div class="app-menu-sub">ä»Šé€±ã®ã‚·ãƒ•ãƒˆç”»åƒã‚’é–‹ã</div>
                </div>
                <div class="app-menu-right">
                  <button type="button" id="openShiftFromMenu" class="menu-link-btn">
                    é–‹ã
                  </button>
                  <span class="menu-arrow">â€º</span>
                </div>
              </li>

              <!-- æ–‡å­—ã®å¤§ãã• è¡Œ -->
              <li class="app-menu-item">
                <div class="app-menu-icon">ğŸ”¤</div>
                <div class="app-menu-main">
                  <div class="app-menu-title">æ–‡å­—ã®å¤§ãã•</div>
                  <div class="app-menu-sub">è¦‹ã‚„ã™ã„ã‚µã‚¤ã‚ºã‚’é¸ã‚“ã§ãã ã•ã„</div>
                </div>
                <div class="app-menu-right app-menu-font-buttons">
                  <button type="button" data-size="small" class="btn-secondary">å°</button>
                  <button type="button" data-size="medium" class="btn-secondary">ä¸­</button>
                  <button type="button" data-size="large" class="btn-secondary">å¤§</button>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>

    </main>

    <div class="footer-note">
      è¿·ã£ãŸã‚‰ï¼šAã‚¿ã‚¹ã‚¯ â†’ å‰é™³ â†’ æ¸…æƒ ã®é †ã§å‹•ã‘ã°OKã€‚
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js"></script>

  <script>
    // =============================
    // Firebase è¨­å®š
    // =============================
    const firebaseConfig = {
      apiKey: "AIzaSyAPBMvTpzKCcPxLETncBqVR8fzf0cqKirc",
      authDomain: "lawson-workflow.firebaseapp.com",
      projectId: "lawson-workflow",
      storageBucket: "lawson-workflow.appspot.com",
      messagingSenderId: "335371795694",
      appId: "1:335371795694:web:3b0950a616d368b284c7ff",
      measurementId: "G-BGENZNZMRC"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // =============================
    // å–¶æ¥­æ—¥ã‚­ãƒ¼è¨ˆç®—ï¼ˆ7:00åˆ‡ã‚Šæ›¿ãˆï¼‰
    // =============================
    function getCurrentBusinessKey() {
      const now = new Date();
      const y = now.getFullYear();
      const m = now.getMonth();
      const d = now.getDate();
      const base = new Date(y, m, d);

      if (now.getHours() < 7) {
        base.setDate(base.getDate() - 1);
      }

      const yy = base.getFullYear();
      const mm = String(base.getMonth() + 1).padStart(2, "0");
      const dd = String(base.getDate()).padStart(2, "0");
      return `${yy}-${mm}-${dd}`;
    }

    // =============================
    // 7:00 è‡ªå‹•ãƒªã‚»ãƒƒãƒˆï¼ˆãƒšãƒ¼ã‚¸å†èª­ã¿è¾¼ã¿ï¼‰
    // =============================
    function setupDailyResetAt7AM() {
      function scheduleNextReset() {
        const now = new Date();
        const next = new Date();
        next.setHours(7, 0, 0, 0);
        if (now >= next) {
          next.setDate(next.getDate() + 1);
        }
        const ms = next - now;
        setTimeout(() => {
          location.reload();
          scheduleNextReset();
        }, ms);
      }
      scheduleNextReset();
    }

    // =============================
    // æ™‚é–“å¸¯ID åˆ¤å®š
    // =============================
    function getCurrentSlotIdByHour(hour) {
      if (hour >= 6 && hour < 9)  return "t6-8";
      if (hour >= 9 && hour < 12) return "t9-11";
      if (hour >= 12 && hour < 15) return "t12-14";
      if (hour >= 15 && hour < 18) return "t15-17";
      if (hour >= 18 && hour < 21) return "t18-20";
      if (hour >= 21 && hour < 24) return "t21-23";
      if (hour >= 0 && hour < 3)   return "t0-2";
      return "t3-5";
    }

    function scrollToCurrentTimeSlot() {
      const now = new Date();
      const h = now.getHours();
      const slotId = getCurrentSlotIdByHour(h);
      const el = document.getElementById(slotId);
      if (!el) return;

      setTimeout(() => {
        const header = document.querySelector(".top-bar") || document.querySelector("header");
        const headerHeight = header ? header.offsetHeight : 80;
        const rect = el.getBoundingClientRect();
        const targetY = rect.top + window.scrollY - headerHeight - 10;
        window.scrollTo({
          top: targetY,
          behavior: "smooth"
        });
      }, 400);
    }

    // =============================
    // DOM æº–å‚™ã§ããŸã‚‰ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
    // =============================
    document.addEventListener("DOMContentLoaded", () => {
      // ===== DMMé¢¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹é–‰ =====
      const appMenuBtn = document.getElementById("appMenuBtn");
      const appMenuOverlay = document.getElementById("appMenuOverlay");
      const appMenuClose = document.getElementById("appMenuClose");

      function openAppMenu() {
        if (appMenuOverlay) appMenuOverlay.style.display = "flex";
      }
      function closeAppMenu() {
        if (appMenuOverlay) appMenuOverlay.style.display = "none";
      }

      appMenuBtn?.addEventListener("click", openAppMenu);
      appMenuClose?.addEventListener("click", closeAppMenu);
      appMenuOverlay?.addEventListener("click", (e) => {
        if (e.target === appMenuOverlay) {
          closeAppMenu();
        }
      });

      // =============================
      // ã‚·ãƒ•ãƒˆè¡¨URLèª­ã¿è¾¼ã¿ ï¼† ãƒœã‚¿ãƒ³2ã¤
      // =============================
      const openShiftBtn = document.getElementById("openShiftBtn");
      const openShiftFromMenu = document.getElementById("openShiftFromMenu");
      let shiftImageUrl = null;

      function loadShiftImageUrl() {
        db.collection("settings").doc("shiftSheet").get()
          .then((snap) => {
            if (!snap.exists) {
              [openShiftBtn, openShiftFromMenu].forEach((btn) => {
                if (btn) {
                  btn.textContent = "ã‚·ãƒ•ãƒˆè¡¨ï¼ˆæœªè¨­å®šï¼‰";
                  btn.disabled = true;
                }
              });
              return;
            }
            const data = snap.data() || {};
            shiftImageUrl = data.imageUrl || null;

            if (!shiftImageUrl) {
              [openShiftBtn, openShiftFromMenu].forEach((btn) => {
                if (btn) {
                  btn.textContent = "ã‚·ãƒ•ãƒˆè¡¨ï¼ˆæœªè¨­å®šï¼‰";
                  btn.disabled = true;
                }
              });
            }
          })
          .catch((err) => {
            console.error("shiftSheet èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼", err);
            [openShiftBtn, openShiftFromMenu].forEach((btn) => {
              if (btn) {
                btn.textContent = "ã‚·ãƒ•ãƒˆè¡¨èª­ã¿è¾¼ã¿å¤±æ•—";
                btn.disabled = true;
              }
            });
          });
      }

      function openShiftWindow() {
        if (shiftImageUrl) {
          window.open(shiftImageUrl, "_blank");
        } else {
          alert("ã¾ã ã‚·ãƒ•ãƒˆè¡¨ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚\nã‚ªãƒ¼ãƒŠãƒ¼ç”»é¢ã‹ã‚‰URLã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚");
        }
      }

      if (openShiftBtn) {
        openShiftBtn.addEventListener("click", openShiftWindow);
      }
      if (openShiftFromMenu) {
        openShiftFromMenu.addEventListener("click", openShiftWindow);
      }

      loadShiftImageUrl();

      // =============================
      // ã€Œä»Šã®æ™‚é–“å¸¯ã¸ã€ã‚¸ãƒ£ãƒ³ãƒ—ãƒœã‚¿ãƒ³
      // =============================
      const jumpBtn = document.getElementById("jumpNowSlotBtn");
      if (jumpBtn) {
        jumpBtn.addEventListener("click", () => {
          scrollToCurrentTimeSlot();
        });
      }

      // =============================
      // ç«¯æœ«ãƒ©ãƒ™ãƒ«ç®¡ç†ï¼ˆlocalStorageï¼‰
      // =============================
      const DEVICE_LABEL_KEY = "nb_lawson_device_label";
      const deviceLabelDisplay = document.getElementById("deviceLabelDisplay");
      const deviceLabelInput   = document.getElementById("deviceLabelInput");
      const deviceLabelSaveBtn = document.getElementById("deviceLabelSaveBtn");
      let currentDeviceLabel = "æœªè¨­å®š";

      function loadDeviceLabel() {
        const saved = localStorage.getItem(DEVICE_LABEL_KEY);
        if (saved && saved.trim() !== "") {
          currentDeviceLabel = saved.trim();
          if (deviceLabelDisplay) deviceLabelDisplay.textContent = currentDeviceLabel;
          if (deviceLabelInput)   deviceLabelInput.value = currentDeviceLabel;
        } else {
          currentDeviceLabel = "æœªè¨­å®š";
          if (deviceLabelDisplay) deviceLabelDisplay.textContent = "æœªè¨­å®š";
        }
      }

      function saveDeviceLabel() {
        if (!deviceLabelInput) return;
        const value = deviceLabelInput.value.trim();
        if (!value) {
          alert("ç«¯æœ«ãƒ©ãƒ™ãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šãƒ¬ã‚¸æ¨ªiPadï¼‰");
          return;
        }
        currentDeviceLabel = value;
        localStorage.setItem(DEVICE_LABEL_KEY, value);
        if (deviceLabelDisplay) deviceLabelDisplay.textContent = value;
      }

      deviceLabelSaveBtn?.addEventListener("click", saveDeviceLabel);
      deviceLabelInput?.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          e.preventDefault();
          saveDeviceLabel();
        }
      });

      loadDeviceLabel();

      // =============================
      // æ–‡å­—ã‚µã‚¤ã‚ºï¼šå…¨ãƒœã‚¿ãƒ³å…±é€šå‡¦ç†
      // =============================
      const sizeButtons = document.querySelectorAll("button[data-size]");
      function applyFontSize(size) {
        document.body.classList.remove("font-medium", "font-large");
        if (size === "medium") document.body.classList.add("font-medium");
        if (size === "large")  document.body.classList.add("font-large");

        sizeButtons.forEach((btn) => {
          btn.classList.toggle("active", btn.dataset.size === size);
        });

        localStorage.setItem("fontSizeSetting", size);
      }

      sizeButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const size = btn.dataset.size || "small";
          applyFontSize(size);
        });
      });

      const savedSize = localStorage.getItem("fontSizeSetting") || "small";
      applyFontSize(savedSize);

      // =============================
      // æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚é–“ï¼ˆä»Šã¯ä¿å­˜ã ã‘ï¼‰
      // =============================
      const scrollSpeedSelect = document.getElementById("scrollSpeedSelect");
      if (scrollSpeedSelect) {
        const savedSpeed = localStorage.getItem("navScrollSpeed") || "normal";
        scrollSpeedSelect.value = savedSpeed;
        scrollSpeedSelect.addEventListener("change", () => {
          localStorage.setItem("navScrollSpeed", scrollSpeedSelect.value);
        });
      }

      // =============================
      // ç¾åœ¨æ™‚åˆ»è¡¨ç¤º
      // =============================
      const timeDisplay = document.getElementById("time-display");

      function updateTimeDisplay() {
        if (!timeDisplay) return;
        const now = new Date();
        const jp = now.toLocaleString("ja-JP", {
          year: "numeric",
          month: "2-digit",
          day: "2-digit",
          weekday: "short",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit"
        });

        const businessKey = getCurrentBusinessKey();

        let nextReset = new Date();
        nextReset.setHours(7, 0, 0, 0);
        if (now >= nextReset) {
          nextReset.setDate(nextReset.getDate() + 1);
        }
        const nextResetStr = nextReset.toLocaleString("ja-JP", {
          month: "2-digit",
          day: "2-digit",
          weekday: "short",
          hour: "2-digit",
          minute: "2-digit"
        });

        timeDisplay.innerHTML = `
          <div><strong>ç¾åœ¨æ™‚åˆ»ï¼š</strong> ${jp}</div>
          <div><strong>ä»Šæ—¥ã®å–¶æ¥­æ—¥ï¼š</strong> ${businessKey}ï¼ˆ7:00åˆ‡æ›¿ï¼‰</div>
          <div><strong>æ¬¡ã®ãƒªã‚»ãƒƒãƒˆï¼š</strong> ${nextResetStr}</div>
        `;
      }

      updateTimeDisplay();
      setInterval(updateTimeDisplay, 1000);

      // =============================
      // ã‚¿ã‚¹ã‚¯å®šç¾© & ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹åŒæœŸ
      // =============================
      const timeSlotIds = ["t6-8","t9-11","t12-14","t15-17","t18-20","t21-23","t0-2","t3-5"];
      const checkboxMap = new Map();        // taskId -> checkbox
      let latestCheckedIds = new Set();     // Firestore ã‹ã‚‰ã®ãƒã‚§ãƒƒã‚¯æ¸ˆã¿ID
      const taskDocRef = db.collection("tasks").doc("lawson-main");
      let applyingRemote = false;

      // â‘¡ å„æ™‚é–“å¸¯ã®æœ€å¾Œã® tasks-group ã®ä¸‹ã«å®Œäº†ç‡ãƒãƒ¼ã‚’å·®ã—è¾¼ã‚€
      function initializeProgressBars() {
        timeSlotIds.forEach((slotId) => {
          const section = document.getElementById(slotId);
          if (!section) return;

          // ãã®æ™‚é–“å¸¯ã® .tasks-group ã‚’å…¨éƒ¨å–å¾—
          const groups = section.querySelectorAll(".tasks-group");

          // ãªã‘ã‚Œã°ã‚»ã‚¯ã‚·ãƒ§ãƒ³è‡ªä½“ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«
          const target = groups.length > 0 ? groups[groups.length - 1] : section;

          // äºŒé‡ç”Ÿæˆé˜²æ­¢
          if (target.querySelector(".slot-progress")) return;

          const wrap = document.createElement("div");
          wrap.className = "slot-progress";
          wrap.innerHTML = `
            <div class="slot-progress-label" data-slot-progress-label="${slotId}">
              å®Œäº†ï¼š0/0ï¼ˆ0%ï¼‰
            </div>
            <div class="slot-progress-bar">
              <div class="slot-progress-bar-inner" data-slot-progress-bar="${slotId}"></div>
            </div>
          `;
          target.appendChild(wrap);
        });
      }

      // â‘¡ ãƒã‚§ãƒƒã‚¯çŠ¶æ…‹ã‹ã‚‰å®Œäº†ç‡ã‚’è¨ˆç®—ã—ã¦åæ˜ 
      function updateCompletionUI() {
        timeSlotIds.forEach((slotId) => {
          let total = 0;
          let done = 0;

          checkboxMap.forEach((cb, id) => {
            if (id.startsWith(slotId + "-")) {
              total++;
              if (cb.checked) done++;
            }
          });

          const rate = total > 0 ? Math.round((done / total) * 100) : 0;

          const labelEl = document.querySelector(
            `[data-slot-progress-label="${slotId}"]`
          );
          const barEl = document.querySelector(
            `[data-slot-progress-bar="${slotId}"]`
          );

          if (labelEl) {
            labelEl.textContent = `å®Œäº†ï¼š${done}/${total}ï¼ˆ${rate}%ï¼‰`;
          }
          if (barEl) {
            barEl.style.width = `${rate}%`;
          }
        });
      }

      function buildTasksFromDefinition(slotId, ul, tasks, groupLabel) {
        ul.innerHTML = "";
        tasks.forEach((text, index) => {
          const li = document.createElement("li");
          li.innerHTML = `
            <label class="task-item">
              <input type="checkbox">
              <span class="task-text"></span>
            </label>
          `;
          const cb   = li.querySelector('input[type="checkbox"]');
          const span = li.querySelector(".task-text");
          span.textContent = text;

          const taskId = `${slotId}-${groupLabel}-${index}`;
          cb.dataset.taskId = taskId;
          checkboxMap.set(taskId, cb);
          cb.checked = latestCheckedIds.has(taskId);
          ul.appendChild(li);
        });
      }

      async function loadTaskDefinitions() {
        const taskSlotsRef = db.collection("taskSlots");
        await Promise.all(
          timeSlotIds.map(async (slotId) => {
            const section = document.getElementById(slotId);
            if (!section) return;
            const ulA = section.querySelector("ul.tasks.a");
            const ulB = section.querySelector("ul.tasks.b");
            if (!ulA || !ulB) return;

            try {
              const snap = await taskSlotsRef.doc(slotId).get();
              if (snap.exists) {
                const data = snap.data() || {};
                const tasksA = data.tasksA || [];
                const tasksB = data.tasksB || [];
                buildTasksFromDefinition(slotId, ulA, tasksA, "A");
                buildTasksFromDefinition(slotId, ulB, tasksB, "B");
              } else {
                const setupFromExisting = (ul, groupLabel) => {
                  ul.querySelectorAll("li").forEach((li, index) => {
                    const cb = li.querySelector('input[type="checkbox"]');
                    if (!cb) return;
                    const taskId = `${slotId}-${groupLabel}-${index}`;
                    cb.dataset.taskId = taskId;
                    checkboxMap.set(taskId, cb);
                    cb.checked = latestCheckedIds.has(taskId);
                  });
                };
                setupFromExisting(ulA, "A");
                setupFromExisting(ulB, "B");
              }
            } catch (e) {
              console.error("ã‚¿ã‚¹ã‚¯å®šç¾©èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:", slotId, e);
            }
          })
        );
      }

      function saveTasksToFirestore() {
        const checkedIds = [];
        checkboxMap.forEach((cb, id) => {
          if (cb.checked) checkedIds.push(id);
        });
        const businessKey = getCurrentBusinessKey();
        taskDocRef.set(
          { checkedIds, businessKey },
          { merge: true }
        );
      }

      taskDocRef.onSnapshot((doc) => {
        const data = doc.exists ? doc.data() : {};
        const storedKey  = data.businessKey;
        const currentKey = getCurrentBusinessKey();

        if (storedKey !== currentKey) {
          taskDocRef.set(
            { checkedIds: [], businessKey: currentKey },
            { merge: true }
          );
          latestCheckedIds = new Set();
        } else {
          latestCheckedIds = new Set(data.checkedIds || []);
        }

        applyingRemote = true;
        checkboxMap.forEach((cb, id) => {
          cb.checked = latestCheckedIds.has(id);
        });
        applyingRemote = false;

        // â‘¡ Firestoreã‹ã‚‰çŠ¶æ…‹ãŒåæ˜ ã•ã‚ŒãŸã‚‰å®Œäº†ç‡ã‚‚æ›´æ–°
        updateCompletionUI();
      });

      // ãƒ­ã‚°å…±é€šé–¢æ•°
      async function logChecklistAction({ taskId, taskLabel, action, extra }) {
        try {
          await db.collection("checklistLogs").add({
            taskId: taskId ?? null,
            taskLabel: taskLabel ?? null,
            action,
            deviceLabel: currentDeviceLabel || "æœªè¨­å®š",
            businessKey: getCurrentBusinessKey(),
            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
            clientTimeISO: new Date().toISOString(),
            extra: extra ?? null
          });
        } catch (err) {
          console.error("ãƒ­ã‚°ä¿å­˜ã‚¨ãƒ©ãƒ¼:", err);
        }
      }

      // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ â†’ Firestore + ãƒ­ã‚°
      document.body.addEventListener("change", (e) => {
        const target = e.target;
        if (!target.matches('input[type="checkbox"][data-task-id]')) return;
        if (applyingRemote) return;

        saveTasksToFirestore();
        updateCompletionUI(); // â‘¡ ãƒã‚§ãƒƒã‚¯ã®ãŸã³ã«å®Œäº†ç‡ã‚’æ›´æ–°

        const taskId = target.dataset.taskId || null;
        const taskLabel =
          target.closest(".task-item")?.querySelector(".task-text")?.textContent || null;

        logChecklistAction({
          taskId,
          taskLabel,
          action: target.checked ? "check" : "uncheck"
        });
      });

      // â‘¡ å…ˆã«ãƒãƒ¼ã‚’ä½œã£ã¦ã‹ã‚‰ã‚¿ã‚¹ã‚¯å®šç¾©ã‚’ãƒ­ãƒ¼ãƒ‰
      initializeProgressBars();
      loadTaskDefinitions().then(updateCompletionUI);

      // =============================
      // å¼•ãç¶™ããƒ¡ãƒ¢ï¼ˆå…±é€šãƒ»å…¨æ™‚é–“å¸¯ï¼‰
      // =============================
      const handoverSlots  = document.querySelectorAll(".handover-slot");
      const handoverColRef = db.collection("handover");

      handoverSlots.forEach((slotEl) => {
        const slotId    = slotEl.dataset.slot || "global";
        const logEl     = slotEl.querySelector(".handover-log");
        const clearBtn  = slotEl.querySelector(".handover-clear-btn");
        const chipsArea = slotEl.querySelector(".handover-chips");

        // è¡¨ç¤º
        handoverColRef
          .where("businessKey", "==", getCurrentBusinessKey())
          .where("slotId", "==", slotId)
          .onSnapshot((snapshot) => {
            if (!logEl) return;
            logEl.innerHTML = "";

            if (snapshot.empty) {
              const li = document.createElement("li");
              li.textContent = "ã¾ã å¼•ãç¶™ããƒ¡ãƒ¢ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚";
              li.style.fontSize = "0.9em";
              li.style.color = "#999";
              logEl.appendChild(li);
              return;
            }

            const docs = [];
            snapshot.forEach((doc) => docs.push(doc));
            docs.sort((a, b) => {
              const da = a.data().createdAt ? a.data().createdAt.toMillis() : 0;
              const db = b.data().createdAt ? b.data().createdAt.toMillis() : 0;
              return db - da;
            });

            docs.forEach((doc) => {
              const data = doc.data();
              const li = document.createElement("li");
              li.className = "handover-item";

              const textSpan = document.createElement("span");
              textSpan.className = "handover-text";
              textSpan.textContent = data.text || "";

              const timeSpan = document.createElement("span");
              timeSpan.className = "handover-time";
              const t = data.timeLabel || "";
              const name = data.deviceLabel || "";
              timeSpan.textContent = name ? `${t} / ${name}` : t;

              const delBtn = document.createElement("button");
              delBtn.className = "handover-remove";
              delBtn.textContent = "âœ•";
              delBtn.addEventListener("click", () => {
                doc.ref.delete();
              });

              li.appendChild(textSpan);
              li.appendChild(timeSpan);
              li.appendChild(delBtn);
              logEl.appendChild(li);
            });
          });

        function addHandoverForSlot(text) {
          const now = new Date();
          const timeLabel = now.toLocaleTimeString("ja-JP", {
            hour: "2-digit",
            minute: "2-digit"
          });
          const businessKey = getCurrentBusinessKey();
          handoverColRef.add({
            text,
            slotId,
            businessKey,
            timeLabel,
            deviceLabel: currentDeviceLabel || "æœªè¨­å®š",
            createdAt: firebase.firestore.FieldValue.serverTimestamp()
          });
        }

        // ãƒãƒƒãƒ—ï¼ˆglobalãƒ†ãƒ³ãƒ—ãƒ¬ï¼‰
        if (chipsArea) {
          db.collection("handoverTemplates").doc("global").get()
            .then((doc) => {
              chipsArea.innerHTML = "";
              if (!doc.exists) return;

              const chips = doc.data().chips || [];
              const PRIMARY_COUNT = 10;

              const primaryContainer = document.createElement("div");
              primaryContainer.className = "handover-chips-primary";

              const extraContainer = document.createElement("div");
              extraContainer.className = "handover-chips-extra is-hidden";

              chipsArea.appendChild(primaryContainer);

              let toggleBtn = null;
              if (chips.length > PRIMARY_COUNT) {
                toggleBtn = document.createElement("button");
                toggleBtn.className = "handover-chips-toggle";
                toggleBtn.innerHTML = `
                  <span class="arrow">â–¼</span>
                  <span class="label">ã‚‚ã£ã¨è¡¨ç¤º</span>
                `;
                toggleBtn.addEventListener("click", () => {
                  const isHidden = extraContainer.classList.toggle("is-hidden");
                  if (isHidden) {
                    toggleBtn.classList.remove("open");
                    toggleBtn.querySelector(".label").textContent = "ã‚‚ã£ã¨è¡¨ç¤º";
                  } else {
                    toggleBtn.classList.add("open");
                    toggleBtn.querySelector(".label").textContent = "é–‰ã˜ã‚‹";
                  }
                });
                chipsArea.appendChild(toggleBtn);
              }

              chipsArea.appendChild(extraContainer);

              chips.forEach((text, index) => {
                const btn = document.createElement("button");
                btn.className = "handover-chip";
                btn.textContent = text;
                btn.dataset.text = text;
                btn.addEventListener("click", () => {
                  addHandoverForSlot(text);
                });

                if (index < PRIMARY_COUNT) {
                  primaryContainer.appendChild(btn);
                } else {
                  extraContainer.appendChild(btn);
                }
              });
            })
            .catch((err) => {
              console.error("handoverTemplates èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼", err);
            });
        }

        // å…¨æ¶ˆã—
        if (clearBtn) {
          clearBtn.addEventListener("click", async () => {
            if (!confirm("ä»Šæ—¥ã®å¼•ãç¶™ããƒ¡ãƒ¢ã‚’å…¨éƒ¨æ¶ˆã—ã¾ã™ã‹ï¼Ÿ")) return;
            const businessKey = getCurrentBusinessKey();
            const snap = await handoverColRef
              .where("slotId", "==", slotId)
              .where("businessKey", "==", businessKey)
              .get();
            if (snap.empty) return;
            const batch = db.batch();
            snap.forEach((doc) => batch.delete(doc.ref));
            await batch.commit();
          });
        }
      });

      // =============================
      // â‘  çµŒå–¶è€…ãŠçŸ¥ã‚‰ã›ï¼ˆownerNewsï¼‰ï¼‹æ—¢èª­ç®¡ç†
      // =============================
      const infoListEl = document.querySelector(".info-list");
      const noticeStatusBadge = document.getElementById("notice-status-badge");
      const noticeReadBtn = document.getElementById("notice-read-btn");
      const NOTICE_LAST_READ_KEY = "noticeLastReadAt";
      let latestNoticeMs = 0;

      function updateNoticeBadge() {
        if (!noticeStatusBadge || latestNoticeMs === 0) return;

        const lastReadStr = localStorage.getItem(NOTICE_LAST_READ_KEY);
        const lastReadMs = lastReadStr ? Number(lastReadStr) : 0;
        const hasUnread = lastReadMs < latestNoticeMs;

        if (hasUnread) {
          noticeStatusBadge.textContent = "æœªèª­ã‚ã‚Š";
          noticeStatusBadge.classList.add("unread");
          noticeStatusBadge.classList.remove("read");
        } else {
          noticeStatusBadge.textContent = "ã™ã¹ã¦ç¢ºèªæ¸ˆã¿";
          noticeStatusBadge.classList.add("read");
          noticeStatusBadge.classList.remove("unread");
        }
      }

      if (infoListEl) {
        const ownerNewsColRef = db.collection("ownerNews");
        ownerNewsColRef
          .orderBy("createdAt", "desc")
          .limit(5)
          .onSnapshot(
            (snapshot) => {
              infoListEl.innerHTML = "";
              latestNoticeMs = 0;

              if (snapshot.empty) {
                const li = document.createElement("li");
                li.textContent = "ç¾åœ¨ã€ãŠçŸ¥ã‚‰ã›ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚";
                infoListEl.appendChild(li);
                updateNoticeBadge();
                return;
              }

              snapshot.forEach((doc) => {
                const data = doc.data();
                const title = data.title || "";
                const body  = data.body  || "";
                const li = document.createElement("li");
                if (title && body) {
                  li.textContent = `ã€${title}ã€‘ ${body}`;
                } else if (title) {
                  li.textContent = `ã€${title}ã€‘`;
                } else {
                  li.textContent = body || "";
                }
                infoListEl.appendChild(li);

                if (data.createdAt) {
                  const ms = data.createdAt.toMillis();
                  if (ms > latestNoticeMs) latestNoticeMs = ms;
                }
              });

              updateNoticeBadge();
            },
            (error) => {
              console.error("ownerNews èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼", error);
              infoListEl.innerHTML = "";
              const li = document.createElement("li");
              li.textContent = "ãŠçŸ¥ã‚‰ã›ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚";
              infoListEl.appendChild(li);
            }
          );
      }

      // ã€Œå…¨éƒ¨èª­ã‚“ã ã“ã¨ã«ã™ã‚‹ã€ãƒœã‚¿ãƒ³
      if (noticeReadBtn) {
        noticeReadBtn.addEventListener("click", () => {
          if (!latestNoticeMs) {
            alert("ãŠçŸ¥ã‚‰ã›ãŒã‚ã‚Šã¾ã›ã‚“ã€‚");
            return;
          }
          localStorage.setItem(NOTICE_LAST_READ_KEY, String(latestNoticeMs));
          updateNoticeBadge();
        });
      }

      // 7:00è‡ªå‹•ãƒªã‚»ãƒƒãƒˆé–‹å§‹
      setupDailyResetAt7AM();
    });
  </script>
</body>
</html>
