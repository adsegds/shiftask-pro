<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>南部町ローソン 業務チェックリスト</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: #f5f5f5;
    color: #111;
    line-height: 1.6;
  }

  /* ここを広くした：max-width: 1400px に */
  .app {
    max-width: 1400px;
    margin: 0 auto;
    padding-bottom: 80px;
  }

  header {
    position: sticky;
    top: 0;
    z-index: 10;
    background: #111;
    color: #fff;
    padding: 10px 14px;
  }
  header h1 {
    font-size: 16px;
    font-weight: 600;
  }
  header p {
    font-size: 11px;
    opacity: 0.85;
    margin-top: 2px;
  }

  /* ナビ（時間帯ジャンプ） */
  .nav {
    display: flex;
    overflow-x: auto;
    gap: 6px;
    padding: 8px 10px 4px;
    background: #222;
    scrollbar-width: none;
  }
  .nav::-webkit-scrollbar { display: none; }
  .nav a {
    flex: 0 0 auto;
    padding: 4px 8px;
    font-size: 11px;
    border-radius: 999px;
    border: 1px solid #555;
    color: #eee;
    text-decoration: none;
    white-space: nowrap;
  }
  .nav a:hover {
    background: #fff;
    color: #111;
  }

  main { padding: 10px 12px 20px; }

  .slot {
    margin-bottom: 12px;
    background: #fff;
    border-radius: 10px;
    padding: 10px 10px 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.06);
  }

  .slot-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    margin-bottom: 4px;
    border-bottom: 1px solid #eee;
    padding-bottom: 4px;
  }
  .slot-title {
    font-size: 14px;
    font-weight: 600;
  }
  .slot-note {
    font-size: 10px;
    color: #666;
  }

  .tasks-group {
    margin-top: 6px;
  }
  .tasks-group h3 {
    font-size: 12px;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    margin-bottom: 4px;
  }
  .badge {
    font-size: 10px;
    padding: 1px 6px;
    border-radius: 999px;
  }
  .badge-a {
    background: #111;
    color: #fff;
  }
  .badge-b {
    background: #e0e0e0;
    color: #333;
  }

  ul.tasks {
    list-style: none;
    padding-left: 10px;
    border-left: 2px solid #111;
    margin-bottom: 4px;
  }
  ul.tasks.b {
    border-left-color: #bbb;
  }

  /* li→チェック付きの行に変換したときの見た目 */
.task-item {
  display: flex;
  align-items: flex-start;
  gap: 6px;
  font-size: 11px;
  padding: 2px 0;
}
.task-item input[type="checkbox"] {
  margin-top: 2px;
}
.task-text {
  flex: 1;
}

  

  .footer-note {
    font-size: 10px;
    color: #666;
    padding: 6px 4px 20px;
    text-align: center;
  }

  /* ===== お知らせ・引き継ぎ用 ===== */

  .info-list {
    list-style: none;
    font-size: 11px;
    padding-left: 4px;
  }
  .info-list li {
    padding: 2px 0;
  }

  .handover {
    margin-top: 8px;
  }
  .handover-title {
    font-size: 13px;
    font-weight: 600;
    margin-bottom: 4px;
  }
  .handover-note {
    font-size: 10px;
    color: #666;
    margin-bottom: 4px;
  }

  .handover-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-bottom: 6px;
  }
  .handover-chips button {
    border: 1px solid #ccc;
    border-radius: 999px;
    padding: 3px 8px;
    font-size: 10px;
    background: #fafafa;
    cursor: pointer;
  }
  .handover-chips button:hover {
    background: #eee;
  }

  .handover-log {
    list-style: none;
    font-size: 11px;
    border-top: 1px dashed #ddd;
    padding-top: 4px;
  }
  .handover-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 2px 0;
  }
  .handover-text {
    flex: 1;
    margin-right: 6px;
  }
  .handover-time {
    font-size: 10px;
    color: #666;
    margin-right: 4px;
  }
  .handover-remove {
    border: none;
    background: transparent;
    font-size: 12px;
    cursor: pointer;
    color: #999;
  }
  .handover-remove:hover {
    color: #f33;
  }

  .handover-clear {
    margin-top: 4px;
    text-align: right;
  }
  .handover-clear button {
    border: none;
    background: #eee;
    border-radius: 999px;
    padding: 2px 8px;
    font-size: 10px;
    cursor: pointer;
  }
</style>

</head>
<body>
  <div class="app">
    <header>
      <h1>南部町ローソン 業務チェック</h1>
      <p>時間帯ごとの A＝必須 / B＝余裕あれば。迷ったらAから。</p>
      <nav class="nav">
        <a href="#t6-8">6〜8時</a>
        <a href="#t9-11">9〜11時</a>
        <a href="#t12-14">12〜14時</a>
        <a href="#t15-17">15〜17時</a>
        <a href="#t18-20">18〜20時</a>
        <a href="#t21-23">21〜23時</a>
        <a href="#t0-2">0〜2時</a>
        <a href="#t3-5">3〜5時</a>
      </nav>
    </header>

    <main>

<div id="time-display" style="padding: 10px; font-size: 14px; color: #333;">
  時刻を読み込み中…
</div>


      
      <!-- 6〜8時 -->
      <section id="t6-8" class="slot">
        <div class="slot-header">
          <div class="slot-title">6:00〜8:00</div>
          <div class="slot-note">朝の立ち上げ</div>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-a">A 必須</span> 絶対にやる</h3>
          <ul class="tasks a">
            <li>
              <label class="task-item">
                <input type="checkbox">
                <span class="task-text">CDC納品・片づけ（2便）</span>
              </label>
            </li>
            <li>
              <label class="task-item">
                <input type="checkbox">
                <span class="task-text">ベーカリー納品・片づけ（2便）</span>
              </label>
            </li>
            <li>
              <label class="task-item">
                <input type="checkbox">
                <span class="task-text">コーヒーマシン清掃（本体・コンディメント什器・周辺）</span>
              </label>
            </li>
            <li>
              <label class="task-item">
                <input type="checkbox">
                <span class="task-text">トイレ点検</span>
              </label>
            </li>
            <li>
              <label class="task-item">
                <input type="checkbox">
                <span class="task-text">ポットのお湯確認</span>
              </label>
            </li>
            <li>
              <label class="task-item">
                <input type="checkbox">
                <span class="task-text">店内・店頭ゴミ袋の点検・交換</span>
              </label>
            </li>
            <li>
              <label class="task-item">
                <input type="checkbox">
                <span class="task-text">温度チェック</span>
              </label>
            </li>
          </ul>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-b">B 余裕</span> 手が空いたら</h3>
          <ul class="tasks b">
            <li>
              <label class="task-item">
                <input type="checkbox">
                <span class="task-text">店内・店頭ゴミ箱の清掃</span>
              </label>
            </li>
            <li>
              <label class="task-item">
                <input type="checkbox">
                <span class="task-text">サービスコーナー（Loppi・ATM・コピー機）・イートイン清掃</span>
              </label>
            </li>
          </ul>
        </div>
      </section>

      <!-- 9〜11時 -->
      <section id="t9-11" class="slot">
        <div class="slot-header">
          <div class="slot-title">9:00〜11:00</div>
          <div class="slot-note">午前帯</div>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-a">A 必須</span></h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">トイレ点検</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">12時締め発注</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">床清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">プライスカード取り付け</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ポットのお湯確認</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">レジ点検（現金・金券）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">コーヒーマシン清掃（本体・コンディメント・周辺）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">店舗周辺の清掃</span></label></li>
          </ul>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-b">B 余裕</span></h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">店内・店頭ゴミ袋の点検・交換</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">消耗品発注（必要あれば）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FF・厨房原料 使用期限チェック</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">灰皿清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">前陳（ソフトドリンク・冷蔵酒・菓子・即席麺）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">床清掃（2回目）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">品出し（ソフトドリンク・冷蔵酒）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">補充（たばこ）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FF販売許容確認・廃棄</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ホット/常温FF作成（昼）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">マチカフェ販売準備（アイスカップ補充など）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">トイレ清掃（1日1回）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">隙あらば前陳（米飯・オープンケース・デザート・ベーカリー）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">月曜のみ：新商品販促物設置</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 12〜14時 -->
      <section id="t12-14" class="slot">
        <div class="slot-header">
          <div class="slot-title">12:00〜14:00</div>
          <div class="slot-note">昼帯</div>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-a">A 必須</span></h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">CDC納品・片づけ（3便）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">前陳（ソフトドリンク・冷蔵酒、菓子・即席麺）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ポットのお湯確認</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">14時オープンケース廃棄（米飯・調理パン・ベーカリー）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">廃棄登録</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">コーヒーマシン清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">トイレ清掃（1日1回）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">伝票整理</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">送金</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">灰皿清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">補充（ホットドリンク）</span></label></li>
          </ul>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-b">B 余裕</span></h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">隙あらば前陳（米飯・オープンケース・デザート・ベーカリー）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">品出し（菓子・即席麺・ドリンク剤・アイス・冷凍食品）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">店内・店頭ゴミ箱の清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">床清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ダスタークロスがけ</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 15〜17時 -->
      <section id="t15-17" class="slot">
        <div class="slot-header">
          <div class="slot-title">15:00〜17:00</div>
          <div class="slot-note">夕方前</div>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-a">A 必須</span></h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">隙あらば前陳（米飯・オープンケース・デザート・ベーカリー）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">前陳（アイス・冷凍食品、ソフトドリンク・冷蔵酒、菓子・即席麺）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">補充（たばこ）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FF販売許容確認・廃棄</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ホット・常温FF作成（夕）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">トイレ点検</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">店舗周辺の清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">温度チェック</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">たばこ納品・片づけ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">中華まん作成（昼）</span></label></li>
          </ul>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-b">B 余裕</span></h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">レジ点検</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ダスタークロスがけ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">入口ドア拭き上げ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">月曜のみ：販促物設置</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 18〜20時 -->
      <section id="t18-20" class="slot">
        <div class="slot-header">
          <div class="slot-title">18:00〜20:00</div>
          <div class="slot-note">夕方〜夜</div>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-a">A 必須</span></h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">店内・店頭ゴミ袋の点検・交換</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">トイレ清掃（1日1回）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">前陳（菓子・即席麺、ソフトドリンク・冷蔵酒）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">トイレ点検</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">店舗周辺の清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">コーヒーマシン清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">油の酸価度チェック</span></label></li>
          </ul>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-b">B 余裕</span></h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">雑誌・書籍メンテ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">夕刊返品</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ホット・常温FF作成（夜）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">製氷機清掃（水・土）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">棚清掃（日用品1台）（水・土）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">床清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ダスタークロスがけ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">返本</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">店頭（軒下・ガラス面）清掃（水・土）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">店内・店頭ゴミ箱清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">20時オープンケース廃棄（長鮮度おにぎり・長鮮手巻）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">店外/店内マット清掃（水・土）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">冷凍機器清掃（水）</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 21〜23時 -->
      <section id="t21-23" class="slot">
        <div class="slot-header">
          <div class="slot-title">21:00〜23:00</div>
          <div class="slot-note">夜帯</div>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-a">A 必須</span></h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">補充（たばこ）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">DDC納品・片づけ（※水・土はDDC無し → 掃除の日）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">22時オープンケース廃棄（米飯・調理パン・チルド弁当・調理麺…）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">マチカフェ販売準備（アイスカップ）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">トイレ点検</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">灰皿清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">温度チェック</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">トイレ点検（再）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">0時オープンケース廃棄（次時間帯へ）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ホットドリンク販売許容確認・廃棄</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">廃棄登録</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">コーヒーマシン清掃（本体クリーニング）</span></label></li>
          </ul>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-b">B 余裕</span></h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">店内販促物設置（新商品納品日でない日）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">トイレ清掃（1日1回）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">平場販売許容確認・廃棄</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">フィルター・吸込口・換気扇清掃（水・土）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">フライヤー清掃・油交換（水・土）</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 0〜2時 -->
      <section id="t0-2" class="slot">
        <div class="slot-header">
          <div class="slot-title">0:00〜2:00</div>
          <div class="slot-note">深夜前半</div>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-a">A 必須</span></h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FDC納品・片づけ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">温度チェック</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">検収印日付変更</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">精算</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">コピー機精算・用紙補充（入金含む）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">雑誌納品・片づけ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FF什器清掃（中華まん）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">FF販売許容確認・廃棄</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ホットドリンク販売許容確認・廃棄</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">1時オープンケース廃棄（米飯・調理パン）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">平場販売許容確認・廃棄</span></label></li>
          </ul>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-b">B 余裕</span></h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">カウンター清掃</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">深夜時間帯の紙幣確認・調整</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">レジ・カウンター周辺清掃</span></label></li>
          </ul>
        </div>
      </section>

      <!-- 3〜5時 -->
      <section id="t3-5" class="slot">
        <div class="slot-header">
          <div class="slot-title">3:00〜5:00</div>
          <div class="slot-note">早朝</div>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-a">A 必須</span></h3>
          <ul class="tasks a">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">朝刊納品・片づけ</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">品出し（全商品）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">品出し（チルド飲料）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">棚滑り掃除（1台）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">ホット・常温FF作成（朝）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">中華まん作成（朝）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">CDC納品・片づけ（2便）</span></label></li>
            <li><label class="task-item"><input type="checkbox"><span class="task-text">4時オープンケース廃棄（米飯・長鮮手巻・チルド弁当…）</span></label></li>
          </ul>
        </div>

        <div class="tasks-group">
          <h3><span class="badge badge-b">B 余裕</span></h3>
          <ul class="tasks b">
            <li><label class="task-item"><input type="checkbox"><span class="task-text">余裕があれば：前陳・清掃を追加</span></label></li>
          </ul>
        </div>
      </section>


 <!-- お知らせ & 引き継ぎ -->
      <section class="slot">
        <div class="slot-header">
          <div class="slot-title">お知らせ・引き継ぎ</div>
          <div class="slot-note">経営者からの指示と、今日の引き継ぎメモ</div>
        </div>

        <!-- 経営者が GitHub で編集する「お知らせ」 -->
        <div class="tasks-group">
          <h3><span class="badge badge-a">お知らせ</span></h3>
          <ul class="info-list">
            <!-- ★ここを好きに書き換えてOK（GitHubで編集すると全員に反映される） -->
            <li>【重要】水・土は21時半DDCがありません → 清掃を優先してください。</li>
            <li>【確認】今週はアイスの前陳をいつもより丁寧にお願いします。</li>
          </ul>
        </div>

        <!-- 引き継ぎメモ：この端末だけに保存される -->
        <div class="handover">
          <div class="handover-title">引き継ぎメモ（全員で共有）</div>
          <p class="handover-note">
            文章を書くのがだるい人向け。下のボタンをタップするとメモに追加されます。
          </p>

          <!-- 定型文ボタン -->
          <div class="handover-chips">
            <button type="button" class="handover-chip" data-text="FFケース清掃済み">FFケース清掃済み</button>
            <button type="button" class="handover-chip" data-text="ホット・常温FF 補充済み">ホット・常温FF 補充済み</button>
            <button type="button" class="handover-chip" data-text="米飯・おにぎり 前陳＆整理済み">米飯・おにぎり 前陳＆整理済み</button>
            <button type="button" class="handover-chip" data-text="たばこ補充済み">たばこ補充済み</button>
            <button type="button" class="handover-chip" data-text="DDC遅延あり → 品出し途中">DDC遅延あり → 品出し途中</button>
            <button type="button" class="handover-chip" data-text="清掃優先のため品出し一部未完了">清掃優先のため品出し一部未完了</button>
          </div>

          <!-- メモ一覧 -->
          <ul class="handover-log" id="handover-log"></ul>
          <div class="handover-clear">
            <button type="button" id="handover-clear-btn">メモを全部消す</button>
          </div>
        </div>
      </section>

      
    </main>

    <div class="footer-note">
      迷ったら：Aタスク → 前陳 → 清掃 の順で動けばOK。
    </div>
  </div>




  <!-- ↓↓↓ ここから下で、今ある <script> を全部入れ替えてね ↓↓↓ -->

    <!-- Firebase SDK（CDN版）-->
   <!-- Firebase SDK（CDN版）-->
<script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js"></script>

<script>
  // Firebase 設定
  const firebaseConfig = {
    apiKey: "AIzaSyAPBMvTpzKCcPxLETncBqVR8fzf0cqKirc",
    authDomain: "lawson-workflow.firebaseapp.com",
    projectId: "lawson-workflow",
    storageBucket: "lawson-workflow.firebasestorage.app",
    messagingSenderId: "335371795694",
    appId: "1:335371795694:web:3b0950a616d368b284c7ff",
    measurementId: "G-BGENZNZMRC"
  };

  // Firebase 初期化（compat 版）
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // ▼ 営業日キー（6:00 切り替え）の計算
  function getCurrentBusinessKey() {
    const now = new Date(); // 端末のローカル時間（日本なら日本時間）
    const y = now.getFullYear();
    const m = now.getMonth(); // 0始まり
    const d = now.getDate();

    // 今日の日付（0:00）を基準に作る
    const base = new Date(y, m, d);

    // 0:00〜5:59 の間は「前日扱い」にする
    if (now.getHours() < 6) {
      base.setDate(base.getDate() - 1);
    }

    const yy = base.getFullYear();
    const mm = String(base.getMonth() + 1).padStart(2, '0');
    const dd = String(base.getDate()).padStart(2, '0');
    return `${yy}-${mm}-${dd}`; // 例: "2025-11-22"
  }

  document.addEventListener('DOMContentLoaded', () => {
    // =============================
    // 1) チェックリスト Firestore 同期
    // =============================
    const checkboxMap = new Map();

    // 各タスクに固定IDをふる（画面の順番で task-0-0 みたいなIDがつく）
    const taskSections = Array.from(document.querySelectorAll('section.slot'));
    taskSections.forEach((slotEl, slotIndex) => {
      const taskLis = slotEl.querySelectorAll('ul.tasks li');
      taskLis.forEach((li, taskIndex) => {
        const checkbox = li.querySelector('input[type="checkbox"]');
        if (!checkbox) return;
        const id = `task-${slotIndex}-${taskIndex}`;
        checkbox.dataset.taskId = id;
        checkboxMap.set(id, checkbox);
      });
    });

    // 1店舗分の状態を保存するドキュメント
    const taskDocRef = db.collection('tasks').doc('lawson-main');
    let applyingRemote = false; // Firestoreからの反映中フラグ

    // 画面 → Firestore へ保存
    function saveTasksToFirestore() {
      const checkedIds = [];
      checkboxMap.forEach((cb, id) => {
        if (cb.checked) checkedIds.push(id);
      });
      const businessKey = getCurrentBusinessKey();
      taskDocRef.set(
        { checkedIds, businessKey },
        { merge: true }
      );
    }

    // Firestore → 画面への反映（リアルタイム）
    taskDocRef.onSnapshot((doc) => {
      const data = doc.exists ? doc.data() : {};
      const storedKey = data.businessKey;
      const currentKey = getCurrentBusinessKey();

      // ▼ 営業日が変わっていたら 6:00 以降のタイミングで全リセット
      if (storedKey !== currentKey) {
        // Firestore側も空で上書き
        taskDocRef.set(
          { checkedIds: [], businessKey: currentKey },
          { merge: true }
        );

        // 画面上のチェックも全部外す
        applyingRemote = true;
        checkboxMap.forEach((cb) => {
          cb.checked = false;
        });
        applyingRemote = false;

        return; // ここで一旦終了（次の snapshot で新しい状態が来る）
      }

      // ▼ 営業日が同じなら、Firestoreの checkedIds をそのまま反映
      const checkedIds = new Set(data.checkedIds || []);
      applyingRemote = true;
      checkboxMap.forEach((cb, id) => {
        cb.checked = checkedIds.has(id);
      });
      applyingRemote = false;
    });

    // チェックが変わったら保存
    document.body.addEventListener('change', (e) => {
      const target = e.target;
      if (!target.matches('input[type="checkbox"][data-task-id]')) return;
      if (applyingRemote) return; // Firestoreからの反映中なら無視
      saveTasksToFirestore();
    });

    // =============================
    // 2) 引き継ぎメモ Firestore 同期
    // =============================
    const logEl = document.getElementById('handover-log');
    const clearBtn = document.getElementById('handover-clear-btn');
    const chipButtons = document.querySelectorAll('.handover-chip');
    const handoverColRef = db.collection('handover');

    // Firestore → 引き継ぎリスト表示（新しい順）
    function renderHandover(snapshot) {
      if (!logEl) return;
      logEl.innerHTML = '';
      snapshot.forEach((doc) => {
        const data = doc.data();
        const li = document.createElement('li');
        li.className = 'handover-item';

        const textSpan = document.createElement('span');
        textSpan.className = 'handover-text';
        textSpan.textContent = data.text || '';

        const timeSpan = document.createElement('span');
        timeSpan.className = 'handover-time';
        timeSpan.textContent = data.timeLabel || '';

        const delBtn = document.createElement('button');
        delBtn.className = 'handover-remove';
        delBtn.textContent = '✕';
        delBtn.addEventListener('click', () => {
          doc.ref.delete();
        });

        li.appendChild(textSpan);
        li.appendChild(timeSpan);
        li.appendChild(delBtn);
        logEl.appendChild(li);
      });
    }

    handoverColRef.orderBy('createdAt', 'desc').onSnapshot(renderHandover);

    // 定型文メモを追加（chip をタップしたとき）
    function addHandover(text) {
      const now = new Date();
      const timeLabel = now.toLocaleTimeString('ja-JP', {
        hour: '2-digit',
        minute: '2-digit'
      });
      handoverColRef.add({
        text,
        timeLabel,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });
    }

    chipButtons.forEach((btn) => {
      btn.addEventListener('click', () => {
        const text = btn.dataset.text;
        if (text) addHandover(text);
      });
    });

    // 全削除ボタン
    if (clearBtn) {
      clearBtn.addEventListener('click', async () => {
        if (!confirm('引き継ぎメモを全部消しますか？')) return;
        const snap = await handoverColRef.get();
        const batch = db.batch();
        snap.forEach((doc) => batch.delete(doc.ref));
        await batch.commit();
      });
    }

    // =============================
    // 3) 時間表示（現在時刻・営業日キー・次のリセット）
    // =============================
    const timeDisplay = document.getElementById('time-display');

    function updateTimeDisplay() {
      const now = new Date();

      // 現在時刻（日本ローカル）
      const jp = now.toLocaleString('ja-JP', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        weekday: 'short',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });

      // 営業日キー
      const businessKey = getCurrentBusinessKey();

      // 次のリセット時刻（毎日 6:00）
      let nextReset = new Date();
      nextReset.setHours(6, 0, 0, 0);
      if (now >= nextReset) {
        // 6時を過ぎていたら翌日の6時
        nextReset.setDate(nextReset.getDate() + 1);
      }
      const nextResetStr = nextReset.toLocaleString('ja-JP', {
        month: '2-digit',
        day: '2-digit',
        weekday: 'short',
        hour: '2-digit',
        minute: '2-digit'
      });

      if (timeDisplay) {
        timeDisplay.innerHTML = `
          <div><strong>現在時刻：</strong> ${jp}</div>
          <div><strong>今日の営業日：</strong> ${businessKey}（6:00切替）</div>
          <div><strong>次のリセット：</strong> ${nextResetStr}</div>
        `;
      }
    }

    // 1秒ごとに更新
    updateTimeDisplay();
    setInterval(updateTimeDisplay, 1000);
  });
</script>



  <!-- ↑↑↑ ここまでが差し替え部分。すぐ上に </body></html> が来る形でOK ↑↑↑ -->





  
</body>
</html>
